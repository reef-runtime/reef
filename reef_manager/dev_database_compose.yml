# Docker-compose file used for creating development database instances
version: '3.7'

services:
  # App database for development
  reef-mariadb:
    image: mariadb
    container_name: reef-mariadb
    restart: unless-stopped
    environment:
      - MYSQL_ROOT_PASSWORD="${REEF_DB_PASSWORD}"
      - MARIADB_ROOT_PASSWORD="${REEF_DB_PASSWORD}"
      - TZ=Europe/Berlin
      - MYSQL_DATABASE="${REEF_DB_NAME}"
      - MYSQL_USER="${REEF_DB_USERNAME}"
      - MYSQL_PASSWORD="${REEF_DB_USERNAME}"
    ports:
      - "${REEF_DB_PORT}:3306"
    volumes:
      - /etc/localtime:/etc/localtime:ro
      - reef-data:/var/lib/mysql

  # Testing database for CI / CD
  reef-testing-mariadb:
    image: mariadb
    container_name: reef-testing-mariadb
    restart: unless-stopped
    environment:
      - MYSQL_ROOT_PASSWORD="${REEF_DB_PASSWORD}"
      - MARIADB_ROOT_PASSWORD="${REEF_DB_PASSWORD}"
      - TZ=Europe/Berlin
      - MYSQL_DATABASE="${REEF_DB_NAME}"
      - MYSQL_USER="${REEF_DB_USERNAME}"
      - MYSQL_PASSWORD="${REEF_DB_USERNAME}"
    ports:
      - "${REEF_DB_PORT_DEV}:3306"
    volumes:
      - testing-data:/var/lib/mysql

volumes:
  testing-data:
  reef-data:
